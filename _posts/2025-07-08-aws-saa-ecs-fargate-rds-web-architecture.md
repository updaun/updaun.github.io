---
layout: post
title: "AWS SAA Ïã§Ïäµ Î¨∏Ï†ú: ECS FargateÏôÄ RDSÎ•º ÌôúÏö©Ìïú Ïª®ÌÖåÏù¥ÎÑà Í∏∞Î∞ò Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏïÑÌÇ§ÌÖçÏ≤ò"
categories: [aws-saa]
tags: [aws, ecs, fargate, rds, alb, vpc, cloudwatch, auto-scaling]
date: 2025-07-08
---

## üìã Î¨∏Ï†ú ÏãúÎÇòÎ¶¨Ïò§

ÎãπÏã†ÏùÄ Ï§ëÍ≤¨ e-Ïª§Î®∏Ïä§ ÌöåÏÇ¨Ïùò DevOps ÏóîÏßÄÎãàÏñ¥Î°ú Í∑ºÎ¨¥ÌïòÍ≥† ÏûàÏäµÎãàÎã§. Í∏∞Ï°¥ Ïò®ÌîÑÎ†àÎØ∏Ïä§ ÌôòÍ≤ΩÏóêÏÑú Ïö¥ÏòÅÎêòÎçò Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ AWS ÌÅ¥ÎùºÏö∞ÎìúÎ°ú ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖòÌïòÎ©¥ÏÑú Ïª®ÌÖåÏù¥ÎÑà Í∏∞Î∞ò ÏïÑÌÇ§ÌÖçÏ≤òÎ°ú ÌòÑÎåÄÌôîÌï¥Ïïº Ìï©ÎãàÎã§.

### ÌòÑÏû¨ ÏÉÅÌô©
- **Í∏∞Ï°¥ ÌôòÍ≤Ω**: Ïò®ÌîÑÎ†àÎØ∏Ïä§ VMÏóêÏÑú Ïö¥ÏòÅÎêòÎäî Java Spring Boot Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò
- **Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§**: MySQL 5.7 (ÏïΩ 500GB Îç∞Ïù¥ÌÑ∞)
- **Ìä∏ÎûòÌîΩ Ìå®ÌÑ¥**: ÌèâÏÉÅÏãú 1,000 RPS, Ïù¥Î≤§Ìä∏ ÏãúÏ¶å 5,000 RPS
- **Í∞ÄÏö©ÏÑ± ÏöîÍµ¨ÏÇ¨Ìï≠**: 99.9% ÏóÖÌÉÄÏûÑ
- **ÏßÄÏó≠**: ÏïÑÏãúÏïÑ ÌÉúÌèâÏñë ÏßÄÏó≠ ÏÇ¨Ïö©Ïûê ÎåÄÏÉÅ

### ÎπÑÏ¶àÎãàÏä§ ÏöîÍµ¨ÏÇ¨Ìï≠
1. **ÎÜíÏùÄ Í∞ÄÏö©ÏÑ±**: Multi-AZ Î∞∞Ìè¨Î°ú Ïû•Ïï† ÎåÄÏùë
2. **ÏûêÎèô Ïä§ÏºÄÏùºÎßÅ**: Ìä∏ÎûòÌîΩ Ï¶ùÍ∞ÄÏóê Îî∞Î•∏ ÏûêÎèô ÌôïÏû•
3. **Î≥¥Ïïà Í∞ïÌôî**: ÎÑ§Ìä∏ÏõåÌÅ¨ Í≤©Î¶¨ Î∞è ÏïîÌò∏Ìôî
4. **Î™®ÎãàÌÑ∞ÎßÅ**: Ïã§ÏãúÍ∞Ñ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏÉÅÌÉú Î™®ÎãàÌÑ∞ÎßÅ
5. **ÎπÑÏö© Ìö®Ïú®ÏÑ±**: Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ ÏµúÏ†ÅÌôî
6. **Î∞∞Ìè¨ ÏûêÎèôÌôî**: CI/CD ÌååÏù¥ÌîÑÎùºÏù∏ Íµ¨Ï∂ï

## üéØ Ìï¥Í≤∞ Î∞©Ïïà

### 1. Ï†ÑÏ≤¥ ÏïÑÌÇ§ÌÖçÏ≤ò ÏÑ§Í≥Ñ

```
[Route 53] ‚Üí [CloudFront] ‚Üí [ALB] ‚Üí [ECS Fargate] ‚Üí [RDS Multi-AZ]
                                         ‚Üì
[Auto Scaling] ‚Üê [CloudWatch] ‚Üê [Container Insights]
```

### 2. ÎÑ§Ìä∏ÏõåÌÅ¨ ÏïÑÌÇ§ÌÖçÏ≤ò

#### A. VPC ÏÑ§Í≥Ñ
```yaml
VPC Configuration:
  CIDR: 10.0.0.0/16
  
  Public Subnets:
    - 10.0.1.0/24 (ap-northeast-2a) - ALB
    - 10.0.2.0/24 (ap-northeast-2b) - ALB
    - 10.0.3.0/24 (ap-northeast-2c) - ALB
  
  Private Subnets:
    - 10.0.11.0/24 (ap-northeast-2a) - ECS Tasks
    - 10.0.12.0/24 (ap-northeast-2b) - ECS Tasks
    - 10.0.13.0/24 (ap-northeast-2c) - ECS Tasks
  
  Database Subnets:
    - 10.0.21.0/24 (ap-northeast-2a) - RDS Primary
    - 10.0.22.0/24 (ap-northeast-2b) - RDS Standby
    - 10.0.23.0/24 (ap-northeast-2c) - RDS Reserved
```

#### B. Î≥¥Ïïà Í∑∏Î£π ÏÑ§Ï†ï
```yaml
ALB Security Group:
  Inbound:
    - Port 80: 0.0.0.0/0 (HTTP)
    - Port 443: 0.0.0.0/0 (HTTPS)
  Outbound:
    - Port 8080: ECS Security Group

ECS Security Group:
  Inbound:
    - Port 8080: ALB Security Group
  Outbound:
    - Port 3306: RDS Security Group
    - Port 443: 0.0.0.0/0 (HTTPS)

RDS Security Group:
  Inbound:
    - Port 3306: ECS Security Group
  Outbound: None
```

### 3. Ïª®ÌÖåÏù¥ÎÑà ÌôòÍ≤Ω Íµ¨ÏÑ±

#### A. ECS ÌÅ¥Îü¨Ïä§ÌÑ∞ ÏÑ§Ï†ï
```yaml
ECS Cluster:
  Name: ecommerce-cluster
  Type: Fargate
  
  Service Configuration:
    Service Name: ecommerce-service
    Task Definition: ecommerce-task
    Desired Count: 3
    Minimum: 2
    Maximum: 20
    
  Network Configuration:
    VPC: ecommerce-vpc
    Subnets: [private-subnet-1, private-subnet-2, private-subnet-3]
    Security Groups: [ecs-sg]
    Public IP: Disabled
```

#### B. Task Definition ÏòàÏ†ú
```json
{
  "family": "ecommerce-task",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "1024",
  "memory": "2048",
  "executionRoleArn": "arn:aws:iam::account:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::account:role/ecsTaskRole",
  "containerDefinitions": [
    {
      "name": "ecommerce-app",
      "image": "account.dkr.ecr.region.amazonaws.com/ecommerce:latest",
      "portMappings": [
        {
          "containerPort": 8080,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {
          "name": "SPRING_PROFILES_ACTIVE",
          "value": "prod"
        },
        {
          "name": "DB_HOST",
          "value": "ecommerce-db.cluster-xxx.region.rds.amazonaws.com"
        }
      ],
      "secrets": [
        {
          "name": "DB_PASSWORD",
          "valueFrom": "arn:aws:secretsmanager:region:account:secret:rds-password"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/ecommerce",
          "awslogs-region": "ap-northeast-2",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "healthCheck": {
        "command": ["CMD-SHELL", "curl -f http://localhost:8080/health || exit 1"],
        "interval": 30,
        "timeout": 5,
        "retries": 3,
        "startPeriod": 60
      }
    }
  ]
}
```

### 4. Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÑ§Í≥Ñ

#### A. RDS Íµ¨ÏÑ±
```yaml
RDS Configuration:
  Engine: MySQL 8.0
  Instance Class: db.r5.xlarge
  Storage: 500GB GP2 (Auto Scaling enabled)
  Multi-AZ: Yes
  
  Backup:
    Retention Period: 7 days
    Backup Window: 03:00-04:00 UTC
    Maintenance Window: Sun:04:00-Sun:05:00 UTC
  
  Security:
    Encryption at Rest: Yes (KMS)
    SSL/TLS: Required
    
  Parameter Group:
    innodb_buffer_pool_size: 75% of RAM
    max_connections: 1000
    slow_query_log: 1
```

#### B. ÏùΩÍ∏∞ Ï†ÑÏö© Î≥µÏ†úÎ≥∏ ÏÑ§Ï†ï
```yaml
Read Replica:
  Count: 2
  Instance Class: db.r5.large
  Regions: Same region, different AZ
  
  Use Cases:
    - Analytics queries
    - Reporting
    - Read-heavy operations
```

### 5. Î°úÎìú Î∞∏Îü∞Ïã± Íµ¨ÏÑ±

#### A. Application Load Balancer
```yaml
ALB Configuration:
  Type: Application Load Balancer
  Scheme: Internet-facing
  Subnets: [public-subnet-1, public-subnet-2, public-subnet-3]
  
  Target Groups:
    - Name: ecommerce-tg
    - Protocol: HTTP
    - Port: 8080
    - Health Check Path: /health
    - Health Check Interval: 30s
    - Healthy Threshold: 2
    - Unhealthy Threshold: 3
    
  Listeners:
    - Port 80: Redirect to HTTPS
    - Port 443: Forward to ecommerce-tg
    
  SSL Certificate: ACM Certificate
```

#### B. Í≥†Í∏â ÎùºÏö∞ÌåÖ Í∑úÏπô
```yaml
Routing Rules:
  - Priority: 1
    Condition: Path Pattern = /api/*
    Action: Forward to api-target-group
    
  - Priority: 2  
    Condition: Path Pattern = /admin/*
    Action: Forward to admin-target-group
    
  - Priority: 3
    Condition: Header "User-Agent" contains "mobile"
    Action: Forward to mobile-target-group
```

### 6. ÏûêÎèô Ïä§ÏºÄÏùºÎßÅ ÏÑ§Ï†ï

#### A. ECS Service Auto Scaling
```yaml
Auto Scaling Configuration:
  Target Tracking Policies:
    - Metric: ECSServiceAverageCPUUtilization
      Target Value: 70%
      
    - Metric: ECSServiceAverageMemoryUtilization  
      Target Value: 80%
      
    - Metric: ALBRequestCountPerTarget
      Target Value: 100
      
  Step Scaling Policy:
    - Scale Out: +50% when CPU > 85%
    - Scale In: -25% when CPU < 40%
    
  Scaling Cooldown:
    Scale Out: 300 seconds
    Scale In: 300 seconds
```

#### B. ÏòàÏ∏° Ïä§ÏºÄÏùºÎßÅ ÏÑ§Ï†ï
```python
# CloudFormation ÌÖúÌîåÎ¶ø ÏòàÏ†ú
ScalingPolicy:
  Type: AWS::ApplicationAutoScaling::ScalingPolicy
  Properties:
    PolicyName: ECSPredictiveScaling
    PolicyType: TargetTrackingScaling
    ScalingTargetId: !Ref ScalableTarget
    TargetTrackingScalingPolicyConfiguration:
      TargetValue: 70.0
      PredefinedMetricSpecification:
        PredefinedMetricType: ECSServiceAverageCPUUtilization
      ScaleOutCooldown: 300
      ScaleInCooldown: 300
```

### 7. Î™®ÎãàÌÑ∞ÎßÅ Î∞è Î°úÍπÖ

#### A. CloudWatch Î©îÌä∏Î¶≠
```yaml
Container Insights:
  Enabled: true
  Metrics:
    - CPU Utilization
    - Memory Utilization
    - Network I/O
    - Task Count
    - Service Events

Custom Metrics:
  - Application Response Time
  - Database Connection Pool
  - Business KPIs (Orders/minute)
  - Error Rate by Endpoint
```

#### B. Î°úÍπÖ Ï†ÑÎûµ
```yaml
Log Groups:
  - /ecs/ecommerce-app
  - /aws/rds/instance/ecommerce-db/error
  - /aws/applicationelb/ecommerce-alb
  
Log Retention: 30 days

Log Insights Queries:
  - Error Rate: "ERROR" | stats count() by bin(5m)
  - Response Time: "responseTime" | avg(responseTime) by bin(1m)
  - Database Queries: "SELECT" | count() by bin(5m)
```

### 8. Î≥¥Ïïà Íµ¨ÏÑ±

#### A. IAM Ïó≠Ìï† ÏÑ§Ï†ï
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ecr:GetAuthorizationToken",
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
      ],
      "Resource": "arn:aws:logs:*:*:*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "secretsmanager:GetSecretValue"
      ],
      "Resource": "arn:aws:secretsmanager:*:*:secret:ecommerce/*"
    }
  ]
}
```

#### B. Secrets Manager Íµ¨ÏÑ±
```yaml
Database Credentials:
  Secret Name: ecommerce/db/credentials
  Description: RDS database credentials
  Values:
    username: admin
    password: <auto-generated>
    endpoint: ecommerce-db.cluster-xxx.region.rds.amazonaws.com
    port: 3306
    
Rotation:
  Enabled: true
  Schedule: 30 days
  Lambda Function: SecretsManagerRDSMySQLRotationSingleUser
```

### 9. Î∞∞Ìè¨ Ï†ÑÎûµ

#### A. Blue/Green Î∞∞Ìè¨
```yaml
CodeDeploy Configuration:
  Application: ecommerce-app
  Deployment Group: ecommerce-dg
  
  Deployment Strategy:
    Type: Blue/Green
    Termination Wait Time: 5 minutes
    
  Traffic Shifting:
    - 10% immediately
    - 50% after 5 minutes
    - 100% after 10 minutes
    
  Auto Rollback:
    - On deployment failure
    - On alarm thresholds
    - On CloudWatch metrics
```

#### B. CI/CD ÌååÏù¥ÌîÑÎùºÏù∏
```yaml
# CodePipeline Íµ¨ÏÑ±
Pipeline Stages:
  1. Source:
     - GitHub Repository
     - Branch: main
     
  2. Build:
     - CodeBuild Project
     - Docker Image Build
     - Push to ECR
     
  3. Deploy:
     - Update ECS Service
     - Blue/Green Deployment
     - Health Check Validation
     
  4. Post-Deploy:
     - Integration Tests
     - Performance Tests
     - Notification
```

### 10. Ïû¨Ìï¥ Î≥µÍµ¨ Í≥ÑÌöç

#### A. Î∞±ÏóÖ Ï†ÑÎûµ
```yaml
RDS Automated Backup:
  Retention: 7 days
  Point-in-Time Recovery: Enabled
  
Manual Snapshots:
  Schedule: Weekly
  Cross-Region Copy: Enabled
  Retention: 30 days
  
ECS Configuration Backup:
  Task Definitions: Version controlled
  Service Configurations: CloudFormation
  ECR Images: Multi-region replication
```

#### B. Î≥µÍµ¨ Ï†àÏ∞®
```yaml
RTO/RPO Targets:
  RTO: 1 hour
  RPO: 15 minutes
  
Disaster Recovery Steps:
  1. Assess failure scope
  2. Activate standby region (if needed)
  3. Restore database from backup
  4. Deploy ECS services
  5. Update Route 53 records
  6. Validate application functionality
```

## üí° ÏÑ±Îä• ÏµúÏ†ÅÌôî ÌåÅ

### 1. Ïª®ÌÖåÏù¥ÎÑà ÏµúÏ†ÅÌôî
```dockerfile
# Multi-stage build ÏòàÏ†ú
FROM maven:3.8-openjdk-11 AS build
WORKDIR /app
COPY pom.xml .
RUN mvn dependency:go-offline
COPY src ./src
RUN mvn clean package -DskipTests

FROM openjdk:11-jre-slim
RUN addgroup --system appgroup && adduser --system appuser --ingroup appgroup
WORKDIR /app
COPY --from=build /app/target/ecommerce-*.jar app.jar
USER appuser
EXPOSE 8080
ENTRYPOINT ["java", "-XX:+UseContainerSupport", "-jar", "app.jar"]
```

### 2. Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏµúÏ†ÅÌôî
```sql
-- Ïù∏Îç±Ïä§ ÏµúÏ†ÅÌôî
CREATE INDEX idx_order_date ON orders(order_date);
CREATE INDEX idx_customer_email ON customers(email);
CREATE INDEX idx_product_category ON products(category_id);

-- ÌååÌã∞ÏÖîÎãù ÏòàÏ†ú
CREATE TABLE orders_2025 PARTITION OF orders
FOR VALUES FROM ('2025-01-01') TO ('2026-01-01');
```

### 3. Ï∫êÏã± Ï†ÑÎûµ
```yaml
ElastiCache Redis:
  Node Type: cache.r6g.large
  Num Nodes: 3
  Multi-AZ: Yes
  
  Use Cases:
    - Session Store
    - Application Cache
    - Database Query Cache
```

## üìä ÎπÑÏö© ÏµúÏ†ÅÌôî

### 1. Î¶¨ÏÜåÏä§ ÏÇ¨Ïù¥Ïßï
```yaml
Cost Optimization:
  ECS Tasks:
    - CPU: 1 vCPU (Í∏∞Î≥∏)
    - Memory: 2 GB (Í∏∞Î≥∏)
    - Auto ScalingÏúºÎ°ú ÎèôÏ†Å Ï°∞Ï†ï
    
  RDS:
    - Reserved Instance (1ÎÖÑ)
    - Storage Auto Scaling
    - Read Replica ÏµúÏ†ÅÌôî
    
  ALB:
    - Î∂àÌïÑÏöîÌïú ÌÉÄÍ≤ü Í∑∏Î£π Ï†ïÎ¶¨
    - Health Check ÏµúÏ†ÅÌôî
```

### 2. Î™®ÎãàÌÑ∞ÎßÅ ÎπÑÏö©
```yaml
ÏòàÏÉÅ Ïõî ÎπÑÏö© (Ìä∏ÎûòÌîΩ Í∏∞Ï§Ä):
  ECS Fargate (ÌèâÍ∑† 5 tasks): $150
  RDS Multi-AZ (db.r5.xlarge): $400
  ALB: $25
  CloudWatch: $50
  Data Transfer: $100
  
Ï¥ù ÏòàÏÉÅ ÎπÑÏö©: $725/Ïõî
```

## üöÄ Ïã§Ïäµ Í≥ºÏ†ú

### 1. Í∏∞Î≥∏ Íµ¨Ï∂ï
1. VPC Î∞è ÏÑúÎ∏åÎÑ∑ ÏÉùÏÑ±
2. ECS ÌÅ¥Îü¨Ïä§ÌÑ∞ Íµ¨ÏÑ±
3. RDS Ïù∏Ïä§ÌÑ¥Ïä§ Î∞∞Ìè¨
4. ALB ÏÑ§Ï†ï

### 2. Í≥†Í∏â Íµ¨ÏÑ±
1. Auto Scaling Ï†ïÏ±Ö Íµ¨ÌòÑ
2. CI/CD ÌååÏù¥ÌîÑÎùºÏù∏ Íµ¨Ï∂ï
3. Î™®ÎãàÌÑ∞ÎßÅ ÎåÄÏãúÎ≥¥Îìú ÏÉùÏÑ±
4. Î≥¥Ïïà Í∞êÏÇ¨ ÏàòÌñâ

### 3. ÏÑ±Îä• ÌÖåÏä§Ìä∏
1. Î∂ÄÌïò ÌÖåÏä§Ìä∏ ÏãúÎÇòÎ¶¨Ïò§ ÏûëÏÑ±
2. Ïä§ÏºÄÏùºÎßÅ ÎèôÏûë Í≤ÄÏ¶ù
3. Ïû•Ïï† Î≥µÍµ¨ ÌÖåÏä§Ìä∏
4. ÏÑ±Îä• Î©îÌä∏Î¶≠ Î∂ÑÏÑù

Ïù¥ ÏïÑÌÇ§ÌÖçÏ≤òÎäî Ïã§Ï†ú ÌîÑÎ°úÎçïÏÖò ÌôòÍ≤ΩÏóêÏÑú ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî Í≤¨Í≥†ÌïòÍ≥† ÌôïÏû• Í∞ÄÎä•Ìïú Ïª®ÌÖåÏù¥ÎÑà Í∏∞Î∞ò Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Íµ¨Ï°∞Î•º Ï†úÍ≥µÌï©ÎãàÎã§. AWS SAA ÏãúÌóòÏóêÏÑú ÏöîÍµ¨ÌïòÎäî Îã§ÏñëÌïú ÏÑúÎπÑÏä§ ÌÜµÌï©Í≥º Î™®Î≤î ÏÇ¨Î°ÄÎ•º Î™®Îëê Ìè¨Ìï®ÌïòÍ≥† ÏûàÏäµÎãàÎã§.

---

**Í¥ÄÎ†® Ìè¨Ïä§Ìä∏:**
- [AWS SAA Ïª®ÌÖåÏù¥ÎÑà ÎßàÏù¥ÌÅ¨Î°úÏÑúÎπÑÏä§ ÏïÑÌÇ§ÌÖçÏ≤ò](../28/aws-saa-container-microservices-architecture)
- [AWS SAA Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÑ±Îä• ÏµúÏ†ÅÌôî](../24/aws-saa-database-performance-optimization)
