<!-- ì‚¬ìš©ì ì •ì˜ í—¤ë” ìš”ì†Œ -->
<link rel="icon" type="image/png" href="{{ '/assets/img/favicon.png' | relative_url }}">

<!-- ëª©ì°¨ ìë™ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // ëª©ì°¨ ìƒì„±
    function generateTOC() {
        const tocContainer = document.getElementById('toc-content');
        if (!tocContainer) return;
        
        const headers = document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3, .post-content h4');
        if (headers.length === 0) {
            tocContainer.innerHTML = '<p style="color: var(--text-light); font-size: 14px;">ëª©ì°¨ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }
        
        let tocHTML = '<ul>';
        headers.forEach((header, index) => {
            const id = `toc-${index}`;
            header.id = id;
            
            const level = parseInt(header.tagName.charAt(1));
            const indent = (level - 1) * 15;
            
            tocHTML += `
                <li style="margin-left: ${indent}px;">
                    <a href="#${id}" data-target="${id}">
                        ${header.textContent.replace(/^[ğŸ”ğŸš¨ğŸ›¡ï¸ğŸ¯ğŸš€ğŸ“‹ğŸ’­ğŸ“‚ğŸ·ï¸ğŸ“ğŸ“…]*\s*/, '')}
                    </a>
                </li>
            `;
        });
        tocHTML += '</ul>';
        
        tocContainer.innerHTML = tocHTML;
        
        // ëª©ì°¨ í´ë¦­ ì´ë²¤íŠ¸
        tocContainer.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('data-target');
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    }
    
    // ìŠ¤í¬ë¡¤ ì‹œ í˜„ì¬ ì„¹ì…˜ í•˜ì´ë¼ì´íŠ¸
    function highlightCurrentSection() {
        const headers = document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3, .post-content h4');
        const tocLinks = document.querySelectorAll('#toc-content a');
        
        let currentSection = 0;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        headers.forEach((header, index) => {
            if (header.offsetTop <= scrollTop + 100) {
                currentSection = index;
            }
        });
        
        tocLinks.forEach((link, index) => {
            link.style.background = index === currentSection ? 'var(--primary-light)' : '';
            link.style.color = index === currentSection ? 'var(--primary-dark)' : '';
            link.style.fontWeight = index === currentSection ? '600' : '400';
        });
    }
    
    // ë¶€ë“œëŸ¬ìš´ ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜
    function animateElements() {
        const elements = document.querySelectorAll('.post-list > li, .content-area, .sidebar');
        elements.forEach((el, index) => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            
            setTimeout(() => {
                el.style.transition = 'all 0.6s ease-out';
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
            }, index * 100);
        });
    }
    
    // ì‹¤í–‰
    generateTOC();
    animateElements();
    
    // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    let ticking = false;
    window.addEventListener('scroll', function() {
        if (!ticking) {
            requestAnimationFrame(function() {
                highlightCurrentSection();
                ticking = false;
            });
            ticking = true;
        }
    });
    
    // ë°˜ì‘í˜• ë„¤ë¹„ê²Œì´ì…˜ í† ê¸€
    const navTrigger = document.getElementById('nav-trigger');
    const siteNav = document.querySelector('.site-nav');
    
    if (navTrigger && siteNav) {
        navTrigger.addEventListener('change', function() {
            if (this.checked) {
                siteNav.classList.add('nav-open');
            } else {
                siteNav.classList.remove('nav-open');
            }
        });
    }
});
</script>

<!-- ë©”íƒ€ íƒœê·¸ ë° SEO -->
<meta name="theme-color" content="#b19cd9">
<meta name="msapplication-TileColor" content="#b19cd9">

<!-- í”„ë¦¬ë¡œë“œ í°íŠ¸ -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>